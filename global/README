                        GLOBAL ARRAYS LIBRARY



DISCLAIMER

This material was prepared as an account of work sponsored by an
agency of the United States Government.  Neither the United States
Government nor the United States Department of Energy, nor Battelle,
nor any of their employees, MAKES ANY WARRANTY, EXPRESS OR IMPLIED, OR
ASSUMES ANY LEGAL LIABILITY OR RESPONSIBILITY FOR THE ACCURACY,
COMPLETENESS, OR USEFULNESS OF ANY INFORMATION, APPARATUS, PRODUCT,
SOFTWARE, OR PROCESS DISCLOSED, OR REPRESENTS THAT ITS USE WOULD NOT
INFRINGE PRIVATELY OWNED RIGHTS.



ACKNOWLEDGMENT

This software and its documentation were produced with United States
Government support under Contract Number DE-AC06-76RLO-1830 awarded by
the United States Department of Energy.  The United States Government
retains a paid-up non-exclusive, irrevocable worldwide license to
reproduce, prepare derivative works, perform publicly and display
publicly by or for the US Government, including the right to
distribute to other US Government contractors.



What is new ?
~~~~~~~~~~~~
version 3.0   . support for n-dimensional arrays (n<=7)
              . improved interoperability with MPI on clusters of workstations
              . ports to Cray J90 and Windows NT (single machine)

version 2.3   . added lock operations: ga_lock, ga_unlock, ga_create_mutex,
                ga_destroy_mutex
              . ga_acc works for integer data type
              . port to the CRAY T3E (with streams disabled)
              . environment variable TARGET_CPU can be use to guide 
                compilation for particular CPU (R10000 and R8000 are currently 
                recognized on the SGI systems)
              . a new TARGET, SGI_N32 used for the 64-bit SGI systems

version 2.2   . added support for double complex datatype;
              . port to HP and Convex SPP;
              . latency optimizations for IBM SP running AIX 4.X;
              . relaxed restriction on data types in ga_dscal, ga_dscal_patch,
                ga_dadd, ga_dadd_patch, ga_ifill_patch, ga_dfill_patch - these
                functions has been renamed to: ga_scale, ga_scale_patch,
                ga_add, ga_add_patch, ga_fill_patch;
              . new functions: ga_fence and ga_init_fence, ga_zdot,
                and ga_zdot_patch, ga_print_stats;
              . new interface functions to ScaLAPACK: ga_cholesky, ga_llt_solve,
                ga_spd_invert, ga_solve
              . several configuration parameters are exposed to the user in 
                global/src/config.h to allow customization of the package.

version 2.1   . selection of message-passing (TCGMSG or MPI) library
              . new operations: ga_mpi_communicator and ga_proc_topology;
              . performance optimizations;
              . alternative C interface and C test programs;
              . port to Sun Solaris and PC running Linux.

version 2.0   . support for networks of multiprocessors (SMP);
	      . (tightly) integrated shared and distributed memory versions;
              . ability to restrict memory usage in global arrays;
	      . ga_scatter/gather supports integers;
              . a program to test performance of GA primitives;
	      .	different numbering of global array handles (< 0);
	      .	and other internal improvements, like randomized order
		of remote operations, prototypes of C-callable ops, etc. 	

version 1.3.1 . port to CRAY-T3D;
              . new operation ga_summarize;
              . improved ga_dgemm.

version 1.3   .	introduced patch versions of ga_ddot, ga_dscal, ga_dadd;
	      .	also ga_matmul_patch, ga_ifill_patch, ga_dfill_patch, and
		ga_duplicate. 
              . ga_copy_patch now has a transpose argument.

version 1.2   . (loosely) integrated shared and distributed memory versions


Directory Structure:
~~~~~~~~~~~~~~~~~~~

src      - source code for GA library
testing  - test codes
doc      - documents
trace    - source code for tracing library
X        - source code for GA visualization program


Dependencies on other software:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- TCGMSG or MPI: more or less extensive support is required. For
  example, a message-passing library is used on some platforms to
  fork processes, implement broadcast, ga_dgop;

- MA (memory allocator by Greg Thomas) include files are used to implement 
  MA-like addressing;

- GA eigensolver, ga_diag, is a wrapper for the eigensolver from PEIGS library;
  (Please contact George Fann <gi_fann@pnl.gov> about PEIGS)

- BLAS library is required for the eigensolver and ga_dgemm;

- LAPACK library is required for the eigensolver;

- MPI, SCALAPACK, PBBLAS, and BLACS libraries are required for ga_lu_solve,
  ga_cholesky, ga_llt_solve, ga_spd_invert, ga_solve. If you do not install
  these libs, the named operations will not be available.

- if you'd like to use tracing, an additonal library libtrace.a is required,
  and DGA_TRACE define flag should be specified for C and Fortran compilers.


  To build the GA toolkit compatible with MPI, you need to define
  environment variables USE_MPI,  MPI_LIB and MPI_INCLUDE  which
  should point to the location of the MPI library and include
  directories.  Additionaly, if the TCGMSG-MPI library is not needed,
  the make/environmental variable MSG_COMMS should be defined as
  MSG_COMMS = MPI.  Note that some fortran GA test programs use certain
  TCGMSG utility functions (for example, equivalent of C sizeof
  operator) and therefore will not built without TCGMSG or TCGMSG-MPI library.

  Interface routines to ScaLAPACK are only available with MPI, and
  of course with ScaLAPACK. The user is required to define environment
  variables USE_SCALAPACK, and location of ScaLAPACK & Co. libraries
  in variable SCALAPACK. An example:

  setenv USE_SCALAPACK y
  setenv SCALAPACK '-L/msrc/proj/scalapack/LIB/rs6000 -lscalapack -lpblas -ltools -lblacsF77cinit -lblacs'
  setenv USE_MPI y
   
  Since there are certain interdependencies between blacs and
  blacsF77cinit, some system might require specification of -lblacs
  twice to fix the unresolved external symbols from these libs.


Makefiles:
~~~~~~~~~

In addition to makefile there are three more files included in makefiles 
located in the subdirectories: Makefile.h  (definitions & include symbols),
MakeFiles.h (files to be compiled depending on the TARGET machine and
VERSION of memory (shared or distributed), and Makelib.h (specification of
libraries to be linked with when test programs are built).
The user needs to specify TARGET in the ./makefile or on the 
command line when calling make. The library and test programs should be
built by calling make in the current directory. The appropriate value
of VERSION will be determined automatically. 

Valid TARGET is one of: SUN, SOLARIS, SGI, SGI_N32, SGITFP,
        DECOSF, IBM, KSR, SP1, SP, CRAY-T3D, CONVEX-SPP,IPSC, DELTA, PARAGON,
        LINUX, HPUX, CRAY_YMP (J90)

Test Programs:
~~~~~~~~~~~~~

      - Programs: test.x, testsolve.x, testeig.x, testpatch.x are
        available to test this software.

      - Program testspd.x should work only with the ScaLAPACK and TCGMSG-MPI
        interface.

      - Another example program that uses GA is called jacobi.x. The Jacobi
        iterative method is used to solve a system of linear equations
        generated in the solution process of a partial differential 
        equation by the finite differences method. 

      - You might have to modify Makelib.h to provide pointers to
	the PEIGS library in order to use parallel versions of
	eigensolver in testeig.x test program.

      - To run test programs with TCGMSG that creates the GA
	processes on the shared memory and (network of) workstations;
	execute them you should use 'parallel' program -- built in
	tcgmsg/ipcv4.0 -- for example: 
 
              parallel testing/test.x

	assuming that test.x is already built, parallel is accessible
	(you might copy it into your "bin" directory), and you are
	still in the current (g/global/) directory.

        For a single processor execution 'parallel' is
	not required and the program can be run as: 
             
              testing/test.x

        or under control of your favorite debugger. 

        On MPP like T3D, IBM SP, and Intel machines, use appropriate
        system command to specify the number of processors, load and 
        run the programs. For example, to run on four processors of
        the Cray T3D use:

              mppexec testing/test.x -npes 4


Documentation:
~~~~~~~~~~~~~

        An ASCII version of GA documentation is located in doc/global.doc. 

IMPORTANT: 
~~~~~~~~~

      - you need GNU make (version > 3.68) to build this software


Contact for suggestions, comments and bug report:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Jarek Nieplocha
email: <j_nieplocha@pnl.gov> 
phone: (509) 372-4469
mail: Pacific Northwest National Laboratory, MSIN: K1-87, Richland, WA 99352 
